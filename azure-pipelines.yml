trigger:
- main  # Cambia 'main' por el nombre de tu rama principal si es diferente

pool:
  vmImage: 'ubuntu-latest'  # Usamos una imagen Ubuntu para construir el contenedor

steps:
- script: |
    echo "Build.SourcesDirectory: $(Build.SourcesDirectory)"
    ls -la $(Build.SourcesDirectory)
  displayName: 'Mostrar informaci√≥n del repositorio y la ruta'

- task: Checkout@1  # Cambia Checkout@2 a Checkout@1

- task: Docker@2
  inputs:
    containerRegistry: 'dockerhub'  # Nombre del Docker registry
    repository: 'jvicmar95/mi-proyecto'  # Tu repositorio de Docker Hub
    command: 'buildAndPush'
    Dockerfile: '$(Build.SourcesDirectory)/Dockerfile'  # Ruta al Dockerfile
    tags: 'latest'  # Etiqueta para la imagen
    buildContext: '$(Build.SourcesDirectory)'  # Ruta de los archivos fuente